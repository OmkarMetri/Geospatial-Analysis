CREATE TABLE COORDINATES (
    ID serial PRIMARY KEY,
    NAME VARCHAR(255),
    LONG DOUBLE PRECISION,
    LAT DOUBLE PRECISION
);


INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Leavey', -118.28292851816859,34.02152865429954);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Doheny', -118.28399559306906,34.02029460555282);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Science Engineering',-118.28897859345906,34.01965783255462);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Anneberg', -118.28724424875637,34.02096554821964);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Panda Express',-118.28630241149145,34.02028179956489);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Rock Reilly',-118.28416757392226,34.02424045231563);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('USC Village',-118.28517266768762,34.02525454366983);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Traveller',-118.28512095970434,34.02022581442651);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Gerontology',-118.29062347354633,34.02020696436932);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Sol School',-118.28358635930157,34.01947410054453);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Parkside',-118.29084602835864,34.01919091253684);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Card Services',-118.28263993763352,34.02048175372994);
INSERT INTO COORDINATES (NAME,LONG,LAT) VALUES ('Home',-118.29010666356363,34.03094899084867);

-- CREATE EXTENSION postgis;

SELECT ST_AsText(ST_ConvexHull(ST_Collect(ST_MakePoint(LONG,LAT)))) AS CONVEXHULL
FROM COORDINATES;

SELECT
  ID, NAME, LONG, LAT,
  ST_Distance(ST_MakePoint(-118.29010666356363,34.03094899084867), ST_MakePoint(LONG, LAT)) AS distance
FROM COORDINATES
WHERE NAME<>'Home'
ORDER BY DISTANCE LIMIT 4;
